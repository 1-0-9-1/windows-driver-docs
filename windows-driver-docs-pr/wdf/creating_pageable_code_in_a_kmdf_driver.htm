<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="Creating Pageable Code in a KMDF Driver"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Creating Pageable Code in a KMDF Driver</title>

<meta name="MS-HAID" content="Ch8_DFTechniques_1462fa36-b278-4149-afa2-32c7756c8f5f.xml"/>
<meta name="MS-HAID" content="kmdf.creating_pageable_code_in_a_framework_based_driver"/>
<meta name="MS-HAID" content="kmdf.creating_pageable_code_in_a_kmdf_driver"/>
<meta name="MS-HAID" content="wdf.creating_pageable_code_in_a_kmdf_driver"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="wdf.creating_pageable_code_in_a_kmdf_driver"></a>Creating Pageable Code in a KMDF Driver</h1>
</div>
<p><i>Pageable code</i> is code that can be written to the computer's paging file when the code is not being used. You can make part of your driver pageable to reduce its load image and initial load time, and to reduce the amount of your driver's code that uses the computer's limited nonpaged memory pool.</p>
<p>To help you determine whether pageable code or data is appropriate for your driver, do the following:</p>
<ol>
<li>
<p>Identify pageable sections in your driver.</p>
<p>Pageable sections are not loaded into memory until they are needed. For information about how to create pageable sections in a driver, see <a href="kernel.making_drivers_pageable">Making Drivers Pageable</a>.</p>
</li>
<li>
<p>Make sure that paged driver code does not impede a computer's ability to quickly awaken from a low-power state.</p>
<p>All device object callback functions that drivers provide are called at IRQL = PASSIVE_LEVEL, which enables you to make their code pageable (as described in <a href="kernel.making_drivers_pageable">Making Drivers Pageable</a>). </p>
<p>However, you should not make a callback function's code pageable if the framework calls the callback function when the device leaves a low-power state and returns to its working (D0) state. </p>
<p>If such code is pageable, the code might be written to the paging file before the computer enters a sleep state. Therefore, the computer will be slower to awaken because your code cannot be reloaded (and therefore your device cannot become fully operational) until the paging disk's power is restored. </p>
<p>Therefore, the callback functions that are listed in the <a href="a_device_returns_to_its_working_state.htm">A Device Returns to Its Working State</a> topic should not be pageable.</p>
</li>
<li>
<p>Determine whether your driver requires access to pageable data outside the driver, such as files, the registry, or paged pool, during power transitions.</p>
<p>For information about how to enable and disable a driver's ability to access pageable data during power transitions, see <a href="wdf.wdfdeviceinitsetpowerpageable"><b>WdfDeviceInitSetPowerPageable</b></a> and <a href="wdf.wdfdeviceinitsetpowernotpageable"><b>WdfDeviceInitSetPowerNotPageable</b></a>. </p>
<p>For information about how to determine when your driver is in a nonpageable state, see <a href="wdf.wdfdevstateisnp"><b>WdfDevStateIsNP</b></a>.</p>
</li>
</ol>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20Creating Pageable Code in a KMDF Driver%20 RELEASE:%20(3/15/2016)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
