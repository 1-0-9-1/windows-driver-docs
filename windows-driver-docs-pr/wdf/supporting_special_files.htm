<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="Supporting Special Files"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Supporting Special Files</title>

<meta name="MS-HAID" content="Ch8_DFTechniques_3726010e-be1c-4209-9453-a23fa38f8206.xml"/>
<meta name="MS-HAID" content="kmdf.supporting_special_files"/>
<meta name="MS-HAID" content="wdf.supporting_special_files"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="wdf.supporting_special_files"></a>Supporting Special Files</h1>
</div>
<p><i>Special files </i>include paging files, dump files, and hibernation files. If the target device for your driver is a storage device that the system might use for these files, the driver must do the following:</p>
<ul>
<li>
<p>Call <a href="wdf.wdfdevicesetspecialfilesupport"><b>WdfDeviceSetSpecialFileSupport</b></a> to enable or disable support for each type of special file. (Each driver's support for special files is disabled by default.)</p>
<p>A bus driver that <a href="enumerating_the_devices_on_a_bus.htm">enumerates child devices</a> should also call <a href="wdf.wdfdevicesetspecialfilesupport"><b>WdfDeviceSetSpecialFileSupport</b></a> for each child device that can support special files.</p>
</li>
<li>
<p>Call <a href="wdf.wdfdeviceadddependentusagedeviceobject"><b>WdfDeviceAddDependentUsageDeviceObject</b></a>, if one device is dependent on another device when supporting special files.</p>
</li>
<li>
<p>Optionally provide an <a href="wdf.evtdeviceusagenotification"><i>EvtDeviceUsageNotification</i></a> or (starting in KMDF 1.11) <a href="wdf.evtdeviceusagenotificationex"><i>EvtDeviceUsageNotificationEx</i></a> callback function, so the driver will be notified when a special file is created or removed.</p>
</li>
</ul>
<p>If your driver calls <a href="wdf.wdfdevicesetspecialfilesupport"><b>WdfDeviceSetSpecialFileSupport</b></a> for a device, and if a special file is open on the device, the framework does not allow the PnP manager to remove or stop the device.</p>
<p>After a driver has called <a href="wdf.wdfdeviceadddependentusagedeviceobject"><b>WdfDeviceAddDependentUsageDeviceObject</b></a>, it can call <a href="wdf.wdfdeviceremovedependentusagedeviceobject"><b>WdfDeviceRemoveDependentUsageDeviceObject</b></a> to remove a device's dependency on another device.</p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20Supporting Special Files%20 RELEASE:%20(3/15/2016)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
