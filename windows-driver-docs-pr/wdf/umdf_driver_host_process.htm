<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="This topic describes the User-Mode Driver Framework (UMDF) driver host process and how it works with other UMDF components. It applies to both UMDF versions 1 and 2."/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>UMDF Driver Host Process</title>

<meta name="MS-HAID" content="umdfobjectdg_9158e020-0b88-4e8d-b76d-f8a7e69cd370.xml"/>
<meta name="MS-HAID" content="umdf.umdf_driver_host_process"/>
<meta name="MS-HAID" content="wdf.umdf_driver_host_process"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="wdf.umdf_driver_host_process"></a>UMDF Driver Host Process</h1>
</div>
<p>This topic describes the User-Mode Driver Framework (UMDF) driver host process and how it works with other UMDF components. It applies to both UMDF versions 1 and 2.</p>
<p>The driver host process (Wudfhost.exe) is a child process of the driver manager service. Wudfhost.exe usually runs in the <i>LocalService</i> account, which has minimum privileges on the local computer. An instance of Wudfhost.exe loads one or more UMDF driver DLLs, in addition to  the framework DLLs. The driver host process provides a runtime environment that handles interprocess communication (IPC) between the driver manager and the reflector, as well as I/O dispatching, driver loading, driver layering, and thread pool management.</p>
<p>The driver manager can create multiple concurrent instances of Wudfhost.exe, as follows:</p>
<ul>
<li>
<p>If your UMDF driver was built with version 1.11 and is running on Windows 8 or later,  by default the driver manager creates a single instance of Wudfhost that can host multiple device stacks. This technique is called <i>device pooling</i>.</p>
<p>If your UMDF driver was built with version 2.0 and is running on Windows 8.1, pooling is also on by default.</p>
</li>
<li>
<p>
If your driver was built with UMDF version 1.9 or earlier, the framework creates a separate instance of the host process (Wudfhost) for each device stack.</p>
</li>
</ul>
<p>For more about device pooling, see <a href="using_device_pooling_in_umdf_drivers.htm">Using Device Pooling in UMDF Drivers</a>.</p>
<p>Within Wudfhost.exe, each UMDF driver runs in its own address space, and is therefore isolated from the application process and other instances of the driver host. </p>
<p>You can load drivers built with UMDF versions 1 and 2 concurrently, either in the same host process or in different host processes. For example, by default, the driver manager would load a UMDF 1.11 driver and a UMDF 2.0 driver in the same host process on a computer running Windows 8.1.</p>
<p>However, you cannot load UMDF version 1 and 2 drivers in the same device stack. For example, you cannot load a UMDF version 1 filter driver above a UMDF version 2 function driver.</p>
<p>For a diagram that shows how the driver host relates to other UMDF components, see <a href="overview_of_the_umdf.htm">Overview of UMDF</a>.</p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20UMDF Driver Host Process%20 RELEASE:%20(3/15/2016)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
