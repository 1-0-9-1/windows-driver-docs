<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="State Machines in the Framework"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>State Machines in the Framework</title>

<meta name="MS-HAID" content="Ch4_DFPnPPackage_229404c1-7936-4dbe-84b3-2ef0c2e3a514.xml"/>
<meta name="MS-HAID" content="kmdf.state_machines_in_the_framework"/>
<meta name="MS-HAID" content="wdf.state_machines_in_the_framework"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="wdf.state_machines_in_the_framework"></a>State Machines in the Framework</h1>
</div>
<p>To keep track of each device's state, the framework uses  a PnP state machine, a power state machine, and a power policy state machine. The framework creates an instance of each state machine for each device that is plugged into a system. </p>
<p>Very few drivers need to be aware of the state of a device's state machines. However, for the drivers that do need to know this information, the framework provides two sets of interfaces:</p>
<ul>
<li>
<p>A set of driver-supplied event callback functions. </p>
<p>The driver can request that the framework call one of the following callback functions whenever one of the state machines enters or exits a particular state:</p>
<ul>
<li><a href="wdf.evtdevicepnpstatechange"><i>EvtDevicePnpStateChange</i></a>, which the driver registers by calling <a href="wdf.wdfdeviceinitregisterpnpstatechangecallback"><b>WdfDeviceInitRegisterPnpStateChangeCallback</b></a>.</li>
<li><a href="wdf.evtdevicepowerstatechange"><i>EvtDevicePowerStateChange</i></a>, which the driver registers by calling <a href="wdf.wdfdeviceinitregisterpowerstatechangecallback"><b>WdfDeviceInitRegisterPowerStateChangeCallback</b></a>.</li>
<li><a href="wdf.evtdevicepowerpolicystatechange"><i>EvtDevicePowerPolicyStateChange</i></a>, which the driver registers by calling <a href="wdf.wdfdeviceinitregisterpowerpolicystatechangecallback"><b>WdfDeviceInitRegisterPowerPolicyStateChangeCallback</b></a>.</li>
</ul>
</li>
<li>
<p>A set of methods that return the current state of the state machines.</p>
<p>The driver can call one of the following methods to determine the current state of one of the state machines for a particular device:</p>
<ul>
<li><a href="wdf.wdfdevicegetdevicepnpstate"><b>WdfDeviceGetDevicePnpState</b></a></li>
<li><a href="wdf.wdfdevicegetdevicepowerstate"><b>WdfDeviceGetDevicePowerState</b></a></li>
<li><a href="wdf.wdfdevicegetdevicepowerpolicystate"><b>WdfDeviceGetDevicePowerPolicyState</b></a></li>
</ul>
</li>
</ul>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20State Machines in the Framework%20 RELEASE:%20(3/15/2016)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
