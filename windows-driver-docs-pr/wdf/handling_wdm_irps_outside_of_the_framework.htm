<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="Handling WDM IRPs Outside of the Framework"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Handling WDM IRPs Outside of the Framework</title>

<meta name="MS-HAID" content="Ch8_DFTechniques_350d18a4-5c21-42d4-9e2f-c88957300e5c.xml"/>
<meta name="MS-HAID" content="kmdf.handling_wdm_irps_outside_of_the_framework"/>
<meta name="MS-HAID" content="wdf.handling_wdm_irps_outside_of_the_framework"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="wdf.handling_wdm_irps_outside_of_the_framework"></a>Handling WDM IRPs Outside of the Framework</h1>
</div>
<p class="CCE_Message">[Applies to KMDF only]</p>
<p>When the I/O manager delivers an I/O request packet (IRP) to a framework-based driver, the framework intercepts the IRP and then does one of the following:</p>
<ul>
<li>
<p>Processes the IRP. For example, the framework processes IRPs that contain <a href="kernel.irp_mj_pnp"><b>IRP_MJ_PNP</b></a> and <a href="kernel.irp_mj_power"><b>IRP_MJ_POWER</b></a> major I/O function codes. While processing these IRPs, the framework might communicate with the driver by calling the driver's event callback functions.</p>
</li>
<li>
<p>Creates a framework request object for the IRP and delivers the request object to one of the driver's I/O queues so that the driver can receive it, typically in a request handler, and process it. The framework handles read, write, and device I/O control requests in this way.</p>
</li>
<li>
<p>Passes the IRP to the next-lower driver (if your driver is a filter driver), or completes the IRP with a status value of STATUS_INVALID_DEVICE_REQUEST (if your driver is not a filter driver) because the IRP contains an I/O function code that the framework does not support.</p>
</li>
</ul>
<p>Sometimes a driver must handle an I/O function code that the framework does not support. </p>
<p>Rarely, a driver might need to preprocess an IRP before the framework handles it, or the driver might need to postprocess an IRP after the framework and lower-level drivers have finished processing it.</p>
<p>As part of preprocessing, a driver might need to forward an IRP to a specific I/O queue.</p>
<p>The following topics describe these situations:</p>
<p>
<ul>
<li><a href="handling_an_irp_that_the_framework_does_not_support.htm">Handling an IRP that the Framework Does Not Support</a></li>
<li><a href="preprocessing_and_postprocessing_irps.htm">Preprocessing and Postprocessing IRPs</a></li>
<li><a href="dispatching_irps_to_i_o_queues.htm">Dispatching IRPs to I/O Queues</a></li>
</ul>
</p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20Handling WDM IRPs Outside of the Framework%20 RELEASE:%20(3/15/2016)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
