<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="Introduction to WMI for KMDF Drivers"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Introduction to WMI for KMDF Drivers</title>

<meta name="MS-HAID" content="Ch7_DFWMIPackage_b004a94d-473f-4574-bf96-87db8aad931f.xml"/>
<meta name="MS-HAID" content="kmdf.introduction_to_wmi_for_framework_based_drivers"/>
<meta name="MS-HAID" content="kmdf.introduction_to_wmi_for_kmdf_drivers"/>
<meta name="MS-HAID" content="wdf.introduction_to_wmi_for_kmdf_drivers"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="wdf.introduction_to_wmi_for_kmdf_drivers"></a>Introduction to WMI for KMDF Drivers</h1>
</div>
<p class="CCE_Message">[Applies to KMDF only]</p>
<p>Kernel-Mode Driver Framework supports drivers that provide information to <a href="kernel.introduction_to_wmi">Windows Management Instrumentation</a> (WMI). Such drivers are called <i>WMI data providers</i> because they provide data to <i>WMI clients</i>, which are applications that have registered to receive information from WMI.</p>
<p>WMI data providers support <i>WMI data blocks</i>, which can represent one or more of the following:</p>
<ul>
<li>
<p><i>Data items</i>, which contain device-specific data that a driver sends to, or receives from, a WMI client.</p>
</li>
<li>
<p><i>Methods</i> (functions) that the driver executes on behalf of a WMI client.</p>
</li>
<li>
<p><i>Events</i> that the driver sends to WMI clients that have registered to receive notification of device-specific events.</p>
</li>
</ul>
<p>WMI data blocks are specified as <i>WMI classes</i> in .mof files. Each WMI data block is identified by a GUID.</p>
<p>All drivers must support any standard WMI data blocks that WMI defines for their device class. These WMI data blocks are defined in <i>Wmicore.mof</i>. </p>
<p>Your driver can also support WMI data blocks that you define in a .mof file. To learn how to define and publish customized WMI data blocks, see the following sections: </p>
<dl>
<dd>
<p><a href="kernel.mof_syntax_for_wmi_data_and_event_blocks">MOF Syntax for WMI Data and Event Blocks</a></p>
</dd>
<dd>
<p><a href="kernel.designing_wmi_data_and_event_blocks">Designing WMI Data and Event Blocks</a></p>
</dd>
<dd>
<p><a href="kernel.publishing_a_wmi_schema">Publishing a WMI Schema</a></p>
</dd>
<dd>
<p><a href="kernel.wmi_property_sheets">WMI Property Sheets</a></p>
</dd>
</dl>
<h3><a id="framework_wmi_objects_and_callback_functions"></a><a id="FRAMEWORK_WMI_OBJECTS_AND_CALLBACK_FUNCTIONS"></a>Framework WMI Objects and Callback Functions</h3>
<p>The framework defines two objects that drivers can use to implement WMI data providers. The <i>WMI provider object</i> represents the schema for WMI data blocks that the driver provides. The <i>WMI instance object</i> represents an instance of a data block that is associated with a particular provider. Drivers communicate with WMI clients by implementing the following event callback functions that these two objects define:</p>
<p></p>
<dl>
<dt><a id="EvtWmiProviderFunctionControl"></a><a id="evtwmiproviderfunctioncontrol"></a><a id="EVTWMIPROVIDERFUNCTIONCONTROL"></a><a href="wdf.evtwmiproviderfunctioncontrol"><i>EvtWmiProviderFunctionControl</i></a></dt>
<dd>
<p>Enables and disables the driver's support for collecting WMI data and sending WMI events.</p>
</dd>
<dt><a id="EvtWmiInstanceQueryInstance"></a><a id="evtwmiinstancequeryinstance"></a><a id="EVTWMIINSTANCEQUERYINSTANCE"></a><a href="wdf.evtwmiinstancequeryinstance"><i>EvtWmiInstanceQueryInstance</i></a></dt>
<dd>
<p>Delivers a WMI provider's instance data to a WMI client.</p>
</dd>
<dt><a id="EvtWmiInstanceSetInstance_and_EvtWmiInstanceSetItem"></a><a id="evtwmiinstancesetinstance_and_evtwmiinstancesetitem"></a><a id="EVTWMIINSTANCESETINSTANCE_AND_EVTWMIINSTANCESETITEM"></a><a href="wdf.evtwmiinstancesetinstance"><i>EvtWmiInstanceSetInstance</i></a> and <a href="wdf.evtwmiinstancesetitem"><i>EvtWmiInstanceSetItem</i></a></dt>
<dd>
<p>Set information in a driver's data block to client-supplied values.</p>
</dd>
<dt><a id="EvtWmiInstanceExecuteMethod"></a><a id="evtwmiinstanceexecutemethod"></a><a id="EVTWMIINSTANCEEXECUTEMETHOD"></a><a href="wdf.evtwmiinstanceexecutemethod"><i>EvtWmiInstanceExecuteMethod</i></a></dt>
<dd>
<p>Executes a driver-supplied method, at the request of a client.</p>
</dd>
</dl>
<h3><a id="sample_drivers_that_implement_wmi"></a><a id="SAMPLE_DRIVERS_THAT_IMPLEMENT_WMI"></a>Sample Drivers that Implement WMI</h3>
<p>The FIREFLY, PCIDRV, and Toaster <a href="sample_kmdf_drivers.htm">sample drivers</a> are WMI data providers.</p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20Introduction to WMI for KMDF Drivers%20 RELEASE:%20(3/15/2016)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
