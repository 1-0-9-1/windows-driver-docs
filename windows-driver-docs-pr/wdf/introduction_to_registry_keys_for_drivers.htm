<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="Introduction to Registry Keys for Drivers"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Introduction to Registry Keys for Drivers</title>

<meta name="MS-HAID" content="Ch8_DFTechniques_15ed663d-4729-4d6b-a6dc-af30a6aa5556.xml"/>
<meta name="MS-HAID" content="kmdf.introduction_to_registry_keys_for_drivers"/>
<meta name="MS-HAID" content="wdf.introduction_to_registry_keys_for_drivers"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="wdf.introduction_to_registry_keys_for_drivers"></a>Introduction to Registry Keys for Drivers</h1>
</div>
<p>Drivers typically use a set of system-defined registry keys to store or access driver-specific or device-specific information. Your driver might access the following registry keys:</p>
<ul>
<li>
<p><b>Parameters</b> key</p>
<p>The driver's <b>Parameters</b> key can contain configuration information for your driver. For Kernel-Mode Driver Framework (KMDF) drivers, this key is located in the <a href="devinst.hklm_system_currentcontrolset_services_registry_tree"><b>HKLM\SYSTEM\CurrentControlSet\Services</b></a> tree, under the driver's service name. For User-Mode Driver Framework (UMDF) drivers, this key is located in the <b>HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\WUDF\Services</b> tree, under the driver's service name. The subkey for the driver always uses the driver's service name, even if the driver binary's file name differs from the service name.
            </p>
<p>When the system calls your driver's <a href="wdf.driverentry_for_kmdf_drivers"><b>DriverEntry</b></a> routine, it passes the driver a path to the driver's <b>Services</b> tree. Your driver must pass this path to <a href="wdf.wdfdrivercreate"><b>WdfDriverCreate</b></a>. Subsequently, the driver can obtain the path by calling <a href="wdf.wdfdrivergetregistrypath"><b>WdfDriverGetRegistryPath</b></a>, and the driver can open its <b>Parameters</b> key by calling <a href="wdf.wdfdriveropenparametersregistrykey"><b>WdfDriverOpenParametersRegistryKey</b></a>. </p>
<p>For more information about the <b>Parameters</b> key, see <a href="devinst.hklm_system_currentcontrolset_services_registry_tree">The HKLM\SYSTEM\CurrentControlSet\Services Tree</a>.</p>
</li>
<li>
<p>Software key</p>
<p>A driver's software key is also called its <i>driver key</i> because the registry contains a software key for each driver. The registry contains a list of all of the device classes, and each driver's software key resides under its device class entry. The system stores information about each driver under its software key.</p>
<p>Your driver can call <a href="wdf.wdffdoinitopenregistrykey"><b>WdfFdoInitOpenRegistryKey</b></a> and <a href="wdf.wdfdeviceopenregistrykey"><b>WdfDeviceOpenRegistryKey</b></a> to open its software key.</p>
<p>For more information about software keys, see <a href="devinst.hklm_system_currentcontrolset_control_registry_tree">The HKLM\SYSTEM\CurrentControlSet\Control Tree</a>.</p>
</li>
<li>
<p>Hardware keys</p>
<p>When a driver stack informs the Plug and Play (PnP) manager that a device is connected to the system, the PnP manager creates a hardware key for the device. This key is also called a <i>device key</i>. The PnP manager stores each device's unique identification information under the device's hardware key.</p>
<p>Your driver can call <a href="wdf.wdffdoinitopenregistrykey"><b>WdfFdoInitOpenRegistryKey</b></a> and <a href="wdf.wdfdeviceopenregistrykey"><b>WdfDeviceOpenRegistryKey</b></a> to open a device's hardware key.</p>
<p>For more information about hardware keys, see <a href="devinst.hklm_system_currentcontrolset_enum_registry_tree">The HKLM\SYSTEM\CurrentControlSet\Enum Tree</a>.</p>
</li>
</ul>
<p>Your driver's INF file can contain <a href="devinst.inf_addreg_directive"><b>INF AddReg directives</b></a> that set registry values. INF files typically use <a href="devinst.inf_ddinstall_hw_section"><b>INF DDInstall.HW sections</b></a> to set information under a device's hardware key. </p>
<p>To determine whether your driver type requires that you store information under specific registry keys, see the sections of this documentation that discuss your driver's device type by using the table of contents. </p>
<p>For more information about registry keys for drivers, see:</p>
<dl>
<dd>
<p><a href="devinst.overview_of_registry_trees_and_keys">Overview of Registry Trees and Keys</a></p>
</dd>
<dd>
<p><a href="kernel.using_the_registry_in_a_driver">Using the Registry in a Driver</a></p>
</dd>
</dl>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20Introduction to Registry Keys for Drivers%20 RELEASE:%20(3/15/2016)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
