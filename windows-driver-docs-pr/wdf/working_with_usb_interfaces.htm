<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="Working with USB Interfaces"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Working with USB Interfaces</title>

<meta name="MS-HAID" content="Ch6_DFUSBPackage_c4e50836-7ac6-4d72-b73a-7c1a041f55ba.xml"/>
<meta name="MS-HAID" content="kmdf.working_with_usb_interfaces"/>
<meta name="MS-HAID" content="wdf.working_with_usb_interfaces"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="wdf.working_with_usb_interfaces"></a>Working with USB Interfaces</h1>
</div>
<p>The framework represents each USB interface as a <i>framework USB interface object</i>. When a driver <a href="working_with_usb_devices.htm#creating_a_framework_usb_device_object">creates a framework USB device object</a>, the framework creates a framework USB interface object for each USB interface that the device's first USB configuration contains. </p>
<p>Most USB devices have only one interface, and the interface has only one alternate setting. Drivers for such devices typically do not need to use the object methods that the framework's USB interface object defines.</p>
<p>If your driver supports USB devices that provide multiple interfaces or alternate settings, interface object methods enable the driver to perform the following operations:</p>
<ul>
<li>
<p><a href="#obtaining_interface_information">Obtain interface information.</a></p>
</li>
<li>
<p><a href="#selecting_an_alternate_setting_for_a_usb_interface">Select an alternate setting for a USB interface.</a></p>
</li>
</ul>
<h3><a id="obtaining_interface_information"></a><a id="OBTAINING_INTERFACE_INFORMATION"></a>
      Obtaining Interface Information</h3>
<p>After your driver has called <a href="wdf.wdfusbtargetdevicecreatewithparameters"><b>WdfUsbTargetDeviceCreateWithParameters</b></a>, it can call <a href="wdf.wdfusbtargetdevicegetinterface"><b>WdfUsbTargetDeviceGetInterface</b></a> to obtain a handle to a framework USB interface object that represents one of the device's USB interfaces. Then your driver can call several methods that the USB interface object defines for obtaining information about the USB interface.</p>
<p>Your driver can call the following methods anytime after it has called <a href="wdf.wdfusbtargetdevicecreatewithparameters"><b>WdfUsbTargetDeviceCreateWithParameters</b></a>: </p>
<p></p>
<dl>
<dt><a id="_________WdfUsbInterfaceGetInterfaceNumber________"></a><a id="_________wdfusbinterfacegetinterfacenumber________"></a><a id="_________WDFUSBINTERFACEGETINTERFACENUMBER________"></a><a href="wdf.wdfusbinterfacegetinterfacenumber"><b>
        WdfUsbInterfaceGetInterfaceNumber
       </b></a></dt>
<dd>
<p>Returns the USB interface number that is associated with a USB interface object.</p>
</dd>
<dt><a id="_________WdfUsbInterfaceGetDescriptor________"></a><a id="_________wdfusbinterfacegetdescriptor________"></a><a id="_________WDFUSBINTERFACEGETDESCRIPTOR________"></a><a href="wdf.wdfusbinterfacegetdescriptor"><b>
        WdfUsbInterfaceGetDescriptor
       </b></a></dt>
<dd>
<p>Retrieves that USB interface descriptor that is associated with one of the alternate settings of a USB interface.</p>
</dd>
<dt><a id="_________WdfUsbInterfaceGetNumEndpoints________"></a><a id="_________wdfusbinterfacegetnumendpoints________"></a><a id="_________WDFUSBINTERFACEGETNUMENDPOINTS________"></a><a href="wdf.wdfusbinterfacegetnumendpoints"><b>
        WdfUsbInterfaceGetNumEndpoints
       </b></a></dt>
<dd>
<p>Returns the number of endpoints that are associated with one of the alternate settings of a USB interface.</p>
</dd>
<dt><a id="_________WdfUsbInterfaceGetEndpointInformation________"></a><a id="_________wdfusbinterfacegetendpointinformation________"></a><a id="_________WDFUSBINTERFACEGETENDPOINTINFORMATION________"></a><a href="wdf.wdfusbinterfacegetendpointinformation"><b>
        WdfUsbInterfaceGetEndpointInformation
       </b></a></dt>
<dd>
<p>Retrieves information about an endpoint and its associated pipe. </p>
</dd>
</dl>
<p>Your driver can call the following methods after it has called <a href="wdf.wdfusbtargetdeviceselectconfig"><b>WdfUsbTargetDeviceSelectConfig</b></a>: </p>
<p></p>
<dl>
<dt><a id="_________WdfUsbInterfaceGetConfiguredSettingIndex________"></a><a id="_________wdfusbinterfacegetconfiguredsettingindex________"></a><a id="_________WDFUSBINTERFACEGETCONFIGUREDSETTINGINDEX________"></a><a href="wdf.wdfusbinterfacegetconfiguredsettingindex"><b>
        WdfUsbInterfaceGetConfiguredSettingIndex
       </b></a></dt>
<dd>
<p>Returns an index value that identifies the alternate setting that is currently selected for a USB interface.</p>
</dd>
<dt><a id="_________WdfUsbInterfaceGetNumConfiguredPipes________"></a><a id="_________wdfusbinterfacegetnumconfiguredpipes________"></a><a id="_________WDFUSBINTERFACEGETNUMCONFIGUREDPIPES________"></a><a href="wdf.wdfusbinterfacegetnumconfiguredpipes"><b>
        WdfUsbInterfaceGetNumConfiguredPipes
       </b></a></dt>
<dd>
<p>Returns the number of pipes that are configured for a specified USB device interface.</p>
</dd>
<dt><a id="_________WdfUsbInterfaceGetConfiguredPipe________"></a><a id="_________wdfusbinterfacegetconfiguredpipe________"></a><a id="_________WDFUSBINTERFACEGETCONFIGUREDPIPE________"></a><a href="wdf.wdfusbinterfacegetconfiguredpipe"><b>
        WdfUsbInterfaceGetConfiguredPipe
       </b></a></dt>
<dd>
<p>Returns a handle to the framework pipe object that is associated with a specified USB device interface and pipe index.</p>
</dd>
</dl>
<h3><a id="selecting_an_alternate_setting_for_a_usb_interface"></a><a id="SELECTING_AN_ALTERNATE_SETTING_FOR_A_USB_INTERFACE"></a>
      Selecting an Alternate Setting for a USB Interface</h3>
<p>After a driver has called <a href="wdf.wdfusbtargetdevicecreatewithparameters"><b>WdfUsbTargetDeviceCreateWithParameters</b></a>, the driver can call <a href="wdf.wdfusbinterfacegetnumsettings"><b>WdfUsbInterfaceGetNumSettings</b></a> to obtain the number of alternate settings that a USB interface supports. </p>
<p>After a driver has called <a href="wdf.wdfusbtargetdeviceselectconfig"><b>WdfUsbTargetDeviceSelectConfig</b></a> to select a configuration for a USB device, the driver can call <a href="wdf.wdfusbinterfaceselectsetting"><b>WdfUsbInterfaceSelectSetting</b></a> to select an alternate setting for one of the configuration's USB interfaces.</p>
<p>The device's alternate settings must be numbered contiguously, starting with zero.</p>
<p>For related information, see <a href="buses.select_a_usb_alternate_setting">How to select an alternate setting in a USB interface</a>.</p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20Working with USB Interfaces%20 RELEASE:%20(3/15/2016)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
