<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="Raw and Translated Resources"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Raw and Translated Resources</title>

<meta name="MS-HAID" content="Ch4_DFPnPPackage_ab1fb139-c07a-4f2a-82de-8e57e3e7555a.xml"/>
<meta name="MS-HAID" content="kmdf.raw_and_translated_resources"/>
<meta name="MS-HAID" content="wdf.raw_and_translated_resources"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="wdf.raw_and_translated_resources"></a>Raw and Translated Resources</h1>
</div>
<p>When a driver's <a href="wdf.evtdeviceremoveaddedresources"><i>EvtDeviceRemoveAddedResources</i></a> or <a href="wdf.evtdevicepreparehardware"><i>EvtDevicePrepareHardware</i></a> callback function receives a resource list, it receives two versions of the list. One version represents the device's <i>raw resources</i>, and the other represents the device's <i>translated resources</i>. Both versions represent the same set of hardware resources, in the same order.</p>
<ul>
<li>
<p>Raw resources are resources that are identified by addresses that are relative to the bus to which the device is connected. Typically, the driver that programs the device provides these addresses to the device.</p>
</li>
<li>
<p>Translated resources are resources that are identified by system physical addresses that drivers use to access the resources.</p>
</li>
</ul>
<p>A driver for a PCI bus device receives resources that are listed in the order in which they appear in the device’s <i>Base Address Registers</i> (BARs). However, additional resource descriptors may be interleaved in the list, such that the resource at index <i>X</i> in the BAR might not match the resource at the same index position in the resource list.</p>
<p>For more information about raw and translated resources, see the member descriptions for the <a href="kernel.cm_partial_resource_descriptor"><b>CM_PARTIAL_RESOURCE_DESCRIPTOR</b></a> structure.</p>
<p>If a device's translated resource list contains a resource with the <b>Type</b> member of the CM_PARTIAL_RESOURCE_DESCRIPTOR structure set to <b>CmResourceTypeMemory</b>, every driver that accesses that resource must do the following:</p>
<ul>
<li>
            The driver's <a href="wdf.evtdevicepreparehardware"><i>EvtDevicePrepareHardware</i></a> callback function must call <a href="kernel.mmmapiospace"><b>MmMapIoSpace</b></a> to map system physical addresses to system virtual addresses.</li>
<li>
<p>The driver's <a href="wdf.evtdevicereleasehardware"><i>EvtDeviceReleaseHardware</i></a> callback function must call <a href="kernel.mmunmapiospace"><b>MmUnmapIoSpace</b></a> to unmap the addresses.</p>
</li>
</ul>
<p>For more information about mapping bus-relative addresses, see <a href="kernel.mapping_bus_relative_addresses_to_virtual_addresses">Mapping Bus-Relative Addresses to Virtual Addresses</a>.</p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20Raw and Translated Resources%20 RELEASE:%20(3/15/2016)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
