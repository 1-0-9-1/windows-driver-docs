<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="Finding and Mapping Hardware Resources in UMDF 1.x Drivers"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Finding and Mapping Hardware Resources in UMDF 1.x Drivers</title>

<meta name="MS-HAID" content="umdf.finding_and_mapping_resources"/>
<meta name="MS-HAID" content="umdf.finding_and_mapping_hardware_resources_in_a_umdf_driver"/>
<meta name="MS-HAID" content="wdf.finding_and_mapping_hardware_resources_in_a_umdf_driver"/>
<meta name="MS-HAID" content="wdf.finding_and_mapping_hardware_resources_in_umdf_1_x_drivers"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="wdf.finding_and_mapping_hardware_resources_in_umdf_1_x_drivers"></a>Finding and Mapping Hardware Resources in UMDF 1.x Drivers</h1>
</div>
<p class="CCE_Message">[This topic applies to UMDF 1.<i>x</i>.]</p>
<p>If you are using UMDF version 2.0 or later, see <a href="finding_and_mapping_hardware_resources.htm">Finding and Mapping Hardware Resources</a>.</p>
<p>A UMDF 1.x driver receives hardware resources in its <a href="wdf.ipnpcallbackhardware2_onpreparehardware"><b>IPnpCallbackHardware2::OnPrepareHardware</b></a> callback method. The driver uses the <a href="wdf.iwdfcmresourcelist"><b>IWDFCmResourceList</b></a> interface to review the translated resource list and identify  memory-mapped registers, I/O ports, and interrupts. </p>
<p>The driver iterates through the resource list by calling <a href="wdf.iwdfcmresourcelist_getcount"><b>IWDFCmResourceList::GetCount</b></a> and <a href="wdf.iwdfcmresourcelist_getdescriptor"><b>IWDFCmResourceList::GetDescriptor</b></a>.</p>
<p>If the driver receives memory-mapped registers, the driver must call <a href="wdf.iwdfdevice3_mapiospace"><b>IWDFDevice3::MapIoSpace</b></a> to map the registers before it can access them. Typically, a driver maps its registers in its <a href="wdf.ipnpcallbackhardware2_onpreparehardware"><b>IPnpCallbackHardware2::OnPrepareHardware</b></a> method. The driver unmaps the registers in its <a href="wdf.ipnpcallbackhardware2_onreleasehardware"><b>IPnpCallbackHardware2::OnReleaseHardware</b></a> callback by calling <a href="wdf.iwdfdevice3_unmapiospace"><b>IWDFDevice3::UnmapIoSpace</b></a>. Note that mapping is not needed for I/O ports.</p>
<p>For an example that shows how a driver finds and maps memory-mapped register resources, see <a href="wdf.iwdfdevice3_mapiospace"><b>IWDFDevice3::MapIoSpace</b></a>.</p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20Finding and Mapping Hardware Resources in UMDF 1.x Drivers%20 RELEASE:%20(3/15/2016)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
