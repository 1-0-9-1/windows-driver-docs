<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="Supporting System Wake-Up in UMDF Drivers"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Supporting System Wake-Up in UMDF Drivers</title>

<meta name="MS-HAID" content="umdfobjectdg_f3117808-49a4-414e-9f71-453332b3f8a9.xml"/>
<meta name="MS-HAID" content="umdf.supporting_system_wake_up_in_umdf_based_drivers"/>
<meta name="MS-HAID" content="umdf.supporting_system_wake_up_in_umdf_drivers"/>
<meta name="MS-HAID" content="wdf.supporting_system_wake_up_in_umdf_drivers"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="wdf.supporting_system_wake_up_in_umdf_drivers"></a>Supporting System Wake-Up in UMDF Drivers</h1>
</div>
<p class="CCE_Message">[This topic applies to UMDF 1.<i>x</i>.]</p>
<p>While the system is in a low-power state, some devices can detect an external event, such as an incoming network packet, and then wake the system. For example, if a PCI device has a system wake-up capability, as indicated in the device's Power Management Capabilities (PMC) register, it wakes the system by raising the Power Management Event (PME) signal on the PCI bus.</p>
<p>If your device can wake the system from a system-wide low-power state, the <a href="wdf.idriverentry_ondeviceadd"><b>IDriverEntry::OnDeviceAdd</b></a> callback function in the <a href="power_policy_ownership_in_umdf.htm">power policy owner</a> must perform the following two steps:</p>
<ol>
<li>Call <a href="wdf.iwdfdevice2_assignsxwakesettings"><b>IWDFDevice2::AssignSxWakeSettings</b></a> to specify:<ul>
<li>The low-power state that the device will enter </li>
<li>Whether users can control the device's idle settings</li>
<li>Whether the device's wake capability is enabled or disabled</li>
</ul>
</li>
<li>Implement the <a href="wdf.ipowerpolicycallbackwakefromsx">IPowerPolicyCallbackWakeFromSx</a> interface and the following event callback functions, if you need them for your device:<ul>
<li><a href="wdf.ipowerpolicycallbackwakefromsx_onarmwakefromsx"><b>IPowerPolicyCallbackWakeFromSx::OnArmWakeFromSx</b></a>, which enable the device hardware to respond to an external wake-up event.</li>
<li><a href="wdf.ipowerpolicycallbackwakefromsx_ondisarmwakefromsx"><b>IPowerPolicyCallbackWakeFromSx::OnDisarmWakeFromSx</b></a>, which disables the device's ability to respond to an external wake-up event. </li>
<li><a href="wdf.ipowerpolicycallbackwakefromsx_onwakefromsxtriggered"><b>IPowerPolicyCallbackWakeFromSx::OnWakeFromSxTriggered</b></a>, which informs the driver that the bus detected a wake signal.</li>
</ul>
</li>
</ol>
<p>Bus drivers also participate in waking up the system. The kernel-mode driver for the device's bus does whatever is necessary on the bus adapter to enable and disable a device's ability to wake from a low-power state.</p>
<p>For information about registry entries that control a device's wake capabilities, see <a href="user_control_of_device_idle_and_wake_behavior_in_umdf.htm">User Control of Device Idle and Wake Behavior in UMDF</a>. </p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20Supporting System Wake-Up in UMDF Drivers%20 RELEASE:%20(3/15/2016)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
