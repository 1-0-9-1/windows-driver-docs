<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="This topic describes the minimal functionality you need to write a Kernel-Mode Driver Framework (KMDF) driver. You need the same minimal functionality to write a User-Mode Driver Framework (UMDF) driver starting in UMDF version 2."/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Writing a Simple WDF Driver</title>

<meta name="MS-HAID" content="Ch0_DFArchOverview_a54a6626-367c-4c76-a199-72cb28ccd75d.xml"/>
<meta name="MS-HAID" content="kmdf.writing_a_simple_framework_based_driver"/>
<meta name="MS-HAID" content="kmdf.writing_a_simple_kmdf_driver"/>
<meta name="MS-HAID" content="wdf.writing_a_simple_kmdf_driver"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="wdf.writing_a_simple_kmdf_driver"></a>Writing a Simple WDF Driver</h1>
</div>
<p>This topic describes the minimal functionality you need to write a Kernel-Mode Driver Framework (KMDF) driver. You need the same minimal functionality to write a User-Mode Driver Framework (UMDF) driver starting in UMDF version 2.</p>
<h2><a id="ddk_writing_a_simple_framework_based_driver_df"></a><a id="DDK_WRITING_A_SIMPLE_FRAMEWORK_BASED_DRIVER_DF"></a></h2>
<p>When you create a new KMDF or UMDF driver, you must select a driver name that has 32 characters or less. This length limit is defined in wdfglobals.h.  If your driver name exceeds the maximum length, your driver will fail to load.
</p>
<p>Each framework-based driver consists of a <a href="wdf.driverentry_for_kmdf_drivers"><b>DriverEntry</b></a> routine and a set of event callback functions that the framework calls when object-specific events occur. For example, a simple framework-based driver might consist of:</p>
<ul>
<li>
<p>A <a href="wdf.driverentry_for_kmdf_drivers"><b>DriverEntry</b></a> routine, which is called when the driver is loaded and which calls <a href="wdf.wdfdrivercreate"><b>WdfDriverCreate</b></a>.</p>
</li>
<li>
<p>An <a href="wdf.evtdriverdeviceadd"><i>EvtDriverDeviceAdd</i></a> event callback function, which the framework calls when the Plug and Play (PnP) manager reports the detection of a device with a hardware identifier (ID) that matches a hardware ID that the driver supports.</p>
<p>You specify the hardware IDs that your driver supports by providing an INF file, which the operating system uses to install drivers the first time that one of your devices is connected to the computer. For more information about how the system uses INF files and hardware IDs, see <a href="devinst.how_setup_selects_drivers">How Setup Selects Drivers</a>. </p>
<p>The driver's <a href="wdf.evtdriverdeviceadd"><i>EvtDriverDeviceAdd</i></a> callback function calls <a href="wdf.wdfdevicecreate"><b>WdfDeviceCreate</b></a> to create a framework device object for the device that was detected.</p>
</li>
<li>
<p>A request handler, such as the <a href="wdf.evtiodefault"><i>EvtIoDefault</i></a> callback function, that the framework calls when the I/O manager sends an I/O request to the driver. </p>
<p>When the I/O manager sends I/O requests to your driver, the framework places the requests in an I/O queue and then notifies your driver by calling a request handler. </p>
<p>The driver must create at least one I/O queue for each device, so that the driver can receive I/O requests for the device. To create an I/O queue, the driver calls <a href="wdf.wdfioqueuecreate"><b>WdfIoQueueCreate</b></a>, which creates a framework queue object and registers the device's request handlers.</p>
</li>
</ul>
<p>For more information about writing a framework-based driver, see <a href="using_the_framework_to_develop_a_driver.htm">Using the Framework to Develop a Driver</a>.</p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20Writing a Simple WDF Driver%20 RELEASE:%20(3/15/2016)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
