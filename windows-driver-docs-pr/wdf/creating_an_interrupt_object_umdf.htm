<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="Creating an Interrupt Object"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Creating an Interrupt Object</title>

<meta name="MS-HAID" content="umdf.creating_an_interrupt_object"/>
<meta name="MS-HAID" content="wdf.creating_an_interrupt_object_umdf"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="wdf.creating_an_interrupt_object_umdf"></a>Creating an Interrupt Object</h1>
</div>
<p class="CCE_Message">[This topic applies to UMDF 1.<i>x</i>.]</p>
<p>A UMDF driver that handles a device's hardware interrupts must create a framework interrupt object for each interrupt that each device can support.
</p>
<p>Typically, a driver creates framework interrupt objects in <a href="wdf.idriverentry_ondeviceadd"><b>IDriverEntry::OnDeviceAdd</b></a>. However, you can also create interrupt objects in <a href="wdf.ipnpcallbackhardware2_onpreparehardware"><b>IPnpCallbackHardware2::OnPrepareHardware</b></a>. </p>
<p>To create a framework interrupt object, your driver must initialize a <a href="wdf.wudf_interrupt_config"><b>WUDF_INTERRUPT_CONFIG</b></a> structure and pass it to the <a href="wdf.iwdfdevice3_createinterrupt"><b>IWDFDevice3::CreateInterrupt</b></a> method. This method registers the following driver-supplied event callback functions:</p>
<p></p>
<dl>
<dt><a id="OnInterruptEnable"></a><a id="oninterruptenable"></a><a id="ONINTERRUPTENABLE"></a><a href="wdf.oninterruptenable"><i>OnInterruptEnable</i></a></dt>
<dd>
<p>Enables a hardware interrupt.</p>
</dd>
<dt><a id="OnInterruptDisable"></a><a id="oninterruptdisable"></a><a id="ONINTERRUPTDISABLE"></a><a href="wdf.oninterruptdisable"><i>OnInterruptDisable</i></a></dt>
<dd>
<p>Disables a hardware interrupt.</p>
</dd>
<dt><a id="OnInterruptIsr"></a><a id="oninterruptisr"></a><a id="ONINTERRUPTISR"></a><a href="wdf.oninterruptisr"><i>OnInterruptIsr</i></a></dt>
<dd>
<p>The interrupt service routine (ISR) for the interrupt.</p>
</dd>
<dt><a id="OnInterruptWorkItem"></a><a id="oninterruptworkitem"></a><a id="ONINTERRUPTWORKITEM"></a><a href="wdf.oninterruptworkitem"><i>OnInterruptWorkItem</i></a></dt>
<dd>
<p>The worker routine for the interrupt.</p>
</dd>
</dl>
<p> 
Optionally, the driver can call <a href="wdf.iwdfinterrupt_setpolicy"><b>IWDFInterrupt::SetPolicy</b></a> or <a href="wdf.iwdfinterrupt_setextendedpolicy"><b>IWDFInterrupt::SetExtendedPolicy</b></a> to specify additional interrupt parameters.</p>
<p>The framework calls the driver's <a href="wdf.idriverentry_ondeviceadd"><b>IDriverEntry::OnDeviceAdd</b></a> callback function before the Plug and Play (PnP) manager has assigned system resources, such as interrupt vectors, to the device. After the PnP manager assigns resources, the framework stores interrupt resources in the device's interrupt object. (Drivers that don't support Plug and Play cannot use interrupt objects.)</p>
<p>
Message-signaled interrupts (MSIs) are supported in Windows Vista and later versions of the operating system. To enable the operating system to support MSIs for your device, your driver's INF file must set some values in the registry. For information about how to set these values, see <a href="kernel.enabling_message_signaled_interrupts_in_the_registry">Enabling Message-Signaled Interrupts in the Registry</a>.
</p>
<p>If a device can support a certain number of MSI messages, the PnP manager will try to assign that number of messages to the device. If the PnP manager cannot assign all of the messages that the device can support, it will assign only one message to the device.</p>
<p>Your driver should create a framework interrupt object for each interrupt vector or MSI message that the device can support. If the PnP manager doesn't grant the device all of the interrupt resources that the device can support, the extra interrupt objects won't be used, and their callback functions won't be called.</p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20Creating an Interrupt Object%20 RELEASE:%20(3/15/2016)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
