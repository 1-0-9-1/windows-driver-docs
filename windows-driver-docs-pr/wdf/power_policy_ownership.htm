<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="Power Policy Ownership"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Power Policy Ownership</title>

<meta name="MS-HAID" content="Ch4_DFPnPPackage_6f5228dc-744a-4ea9-8bc3-067dd5f587d2.xml"/>
<meta name="MS-HAID" content="kmdf.power_policy_ownership"/>
<meta name="MS-HAID" content="wdf.power_policy_ownership"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="wdf.power_policy_ownership"></a>Power Policy Ownership</h1>
</div>
<p>For each device, one (and only one) of the device's drivers must be the device's <i>power policy owner</i>. The power policy owner determines the appropriate <a href="kernel.device_power_states">device power state</a> for a device and sends requests to the device's driver stack whenever the device's power state should change.  </p>
<p>Framework-based drivers do not contain code that requests changes in a device's power state, because the framework provides that code. By default, whenever the system enters a <a href="kernel.system_sleeping_states">system sleeping state</a>, the framework asks the driver for your device's bus to lower the device power state to D3. (Your driver can change the default behavior so that the framework sets your device's sleep state to D1 or D2, if the device provides wake-up capabilities.) When the system power returns to its <a href="kernel.system_working_state_s0">working (S0) state</a>, the framework requests the bus driver to restore your device to its working (D0) state.</p>
<p>The power policy owner is also responsible for enabling and disabling the following device features:</p>
<ul>
<li>
<p>Your device's ability to enter a <a href="kernel.device_sleeping_states">low-power (sleeping) state</a> when it is idle and the system remains in its working (S0) state</p>
</li>
<li>
<p>Your device's ability to wake itself up from a sleeping state when it detects an external event</p>
</li>
<li>
<p>Your device's ability to wake up the entire system from a system sleeping state when it detects an external event</p>
</li>
</ul>
<p>If your device supports these idle power-down and system wake-up capabilities, the power policy owner can also call <a href="wdf.wdfdeviceinitsetpowerpolicyeventcallbacks"><b>WdfDeviceInitSetPowerPolicyEventCallbacks</b></a> to register a set of power policy event callback functions.</p>
<p>By default, for framework-based drivers, the device's function driver is the power policy owner. (If there is no function driver and the bus driver has called <a href="wdf.wdfpdoinitassignrawdevice"><b>WdfPdoInitAssignRawDevice</b></a>, the bus driver is the power policy owner). If you want to change the power policy owner for a driver stack, the default power policy owner must call <a href="wdf.wdfdeviceinitsetpowerpolicyownership"><b>WdfDeviceInitSetPowerPolicyOwnership</b></a> to disable ownership, and the driver that will be the power policy owner must call <b>WdfDeviceInitSetPowerPolicyOwnership</b> to enable ownership.</p>
<p>The framework does the following work for the power policy owner:</p>
<ul>
<li>
<p>It handles all power policy communication between your driver and the rest of the driver stack. For example, your driver does not have to request the bus driver to change the device's power state, because the framework makes the request. </p>
</li>
<li>
<p>If your driver registers power policy event callback functions, the framework calls them when it is time to enable or disable the device's ability to wake itself from a low-power state.</p>
</li>
<li>
<p>If your driver allows users to modify idle and wake settings, the framework provides a user interface in the form of a property sheet page that Device Manager displays.</p>
</li>
</ul>
<p>For more information about the power policy owner's responsibilities, see the following topics:</p>
<p>
<ul>
<li><a href="supporting_idle_power_down.htm">Supporting Idle Power-Down</a></li>
<li><a href="supporting_system_wake_up.htm">Supporting System Wake-Up</a></li>
<li><a href="user_control_of_device_idle_and_wake_behavior.htm">User Control of Device Idle and Wake Behavior</a></li>
<li><a href="supporting_functional_power_states.htm">Supporting Functional Power States</a></li>
</ul>
</p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20Power Policy Ownership%20 RELEASE:%20(3/15/2016)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
