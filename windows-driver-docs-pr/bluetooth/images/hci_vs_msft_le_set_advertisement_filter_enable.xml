<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../BuildX/Script2/preview.xslt"?>
<refpage xmlns="http://microsoft.com/wdcml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://microsoft.com/wdcml ../../BuildX/Schema/xsd/wdcml.xsd">
 <metadata id="bltooth.hci_vs_msft_le_set_advertisement_filter_enable" type="refpage" msdnID="9D70D8BE-117C-434C-9A08-A1A490D2A4D2">
  <title>HCI_VS_MSFT_LE_Set_Advertisement_Filter_Enable</title>
  <devlang value="cpp"/>
  <tech value="bltooth"/>
  <index/>
  <seo nohighlight="1"/>
</metadata>
 <content>
  <desc>
   <p><abstract>HCI_VS_MSFT_LE_Set_Advertisement_Filter_Enable sets the state of the advertisement filters.</abstract></p><table><tr><th>Command</th><th>Code</th><th>Command parameters</th><th>Return parameters</th></tr><tr><td><p>HCI_VS_MSFT_LE_Set_Advertisement_Filter_Enable</p></td><td><p>Chosen base code</p></td><td><p><placeholder>Subcommand_opcode</placeholder></p><p><placeholder>Enable</placeholder></p></td><td><p><placeholder>Status</placeholder></p><p><placeholder>Subcommand_opcode</placeholder></p></td></tr></table><p>If <placeholder>Enable</placeholder> is set to 0x00, the controller shall propagate received advertisements to the host based on existing white list settings. The controller shall continue monitoring the devices that are currently being monitored and generate an <xref targtype="refpage" rid="bltooth.hci_vs_msft_le_monitor_device_event">HCI_VS_MSFT_LE_Monitor_Device_Event</xref> with <placeholder>Monitor_state</placeholder> set to 0 if the device is no longer being monitored. The controller shall generate an HCI_VS_MSFT_LE_Monitor_Device_Event with <placeholder>Monitor_state</placeholder> set to 1 if a new device is being monitored. The host may issue HCI_VS_MSFT_LE_Set_Advertisement_Filter_Enable with <placeholder>Enable</placeholder> set to 0x01 to reenable all the filter conditions.</p><p>If <placeholder>Enable</placeholder> is set to 0x01, this command enables all filters that were set with a previously-issued <xref targtype="refpage" rid="bltooth.hci_vs_msft_le_monitor_advertisement">HCI_VS_MSFT_LE_Monitor_Advertisement</xref> command. The controller shall reject an HCI_VS_MSFT_LE_Set_Advertisement_Filter_Enable command if it does not toggle the filter state:</p><list><item>The controller shall reject an HCI_VS_MSFT_LE_Set_Advertisement_Filter_Enable command with <placeholder>Enable</placeholder> set to 0x01 if it previously received an HCI_VS_MSFT_LE_Set_Advertisement_Filter_Enable command with <placeholder>Enable</placeholder> set to 0x01.</item><item>The controller shall reject the HCI_VS_MSFT_LE_Set_Advertisement_Filter_Enable command with <placeholder>Enable</placeholder> set to 0x00 if it previously received an HCI_VS_MSFT_LE_Set_Advertisement_Filter_Enable command with <placeholder>Enable</placeholder> set to 0x00.</item></list><p>The default state of the advertisement filter shall be off. This state is equivalent to the controller previously receiving a HCI_VS_MSFT_LE_Set_Advertisement_Filter_Enable command with <placeholder>Enable</placeholder> set to 0x00.</p><p>The controller shall promptly generate a Command Completed event in response to this command.</p>
  </desc>
  <section><title>Command parameters</title><sectioncontents><list nobullets="1"><item><p><mark type="bullet_intro"><placeholder>Subcommand_opcode</placeholder></mark> (1 octet):</p><table><tr><th>Value</th><th>Parameter description</th></tr><tr><td><p>0x05</p></td><td><p>The subcommand opcode for HCI_VS_MSFT_LE_Set_Advertisement_Filter_Enable.</p></td></tr></table></item><item><p><mark type="bullet_intro"><placeholder>Enable</placeholder></mark> (1 octet):</p><table><tr><th>Value</th><th>Parameter description</th></tr><tr><td><p>0x00</p></td><td><p>Revert to current white list behavior, but continue monitoring devices based on the <placeholder>Condition</placeholder>s from  <xref targtype="refpage" rid="bltooth.hci_vs_msft_le_monitor_advertisement">HCI_VS_MSFT_LE_Monitor_Advertisement</xref> commands.</p></td></tr><tr><td><p>0x01</p></td><td><p>Enable all issued HCI_VS_MSFT_LE_Monitor_Advertisement commands on the controller.</p></td></tr></table></item></list></sectioncontents></section><section><title>Return parameters</title><sectioncontents><list nobullets="1"><item><p><mark type="bullet_intro"><placeholder>Status</placeholder></mark> (1 octet):</p><table><tr><th>Value</th><th>Parameter description</th></tr><tr><td><p>0x00</p></td><td><p>The command succeeded.</p></td></tr><tr><td><p>0x0C</p></td><td><p>The controller shall return <placeholder>Command Disallowed</placeholder> if the controller rejected the command because it previously saw an HCI_VS_MSFT_LE_Set_Advertisement_Filter_Enable command with <placeholder>Enable</placeholder> set to the same value as this command.</p></td></tr><tr><td><p xml:space="preserve"><mark type="param">Error<entity type="nbsp"/>code</mark></p></td><td><p>The command failed. See <placeholder>Error Codes</placeholder> in the Bluetooth Core specification for details.</p></td></tr></table></item><item><p><mark type="bullet_intro"><placeholder>Subcommand_opcode</placeholder></mark> (1 octet):</p><table><tr><th>Value</th><th>Parameter description</th></tr><tr><td><p>0x05</p></td><td><p>The subcommand opcode for HCI_VS_MSFT_LE_Set_Advertisement_Filter_Enable.</p></td></tr></table></item></list></sectioncontents></section><section><title>Events generated (unless masked away)</title><sectioncontents><p>The controller shall generate a Command Complete event when the HCI_VS_MSFT_LE_Set_Advertisement_Filter_Enable command is received.</p></sectioncontents></section><seealso><xref targtype="refpage" rid="bltooth.hci_vs_msft_le_monitor_advertisement">HCI_VS_MSFT_LE_Monitor_Advertisement</xref><xref targtype="refpage" rid="bltooth.hci_vs_msft_le_monitor_device_event">HCI_VS_MSFT_LE_Monitor_Device_Event</xref></seealso>
  <info><product rid="version">Supported in <tla rid="win_threshold_desktop" expansion="always"/>,  <tla rid="win_threshold_mobile" expansion="first_use_only"/>, and later versions.</product></info>
 </content>
  </refpage>
